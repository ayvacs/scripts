local Player = game:GetService("Players").LocalPlayer
local UIS = game:GetService("UserInputService")

if _G.IJ then
    print("IJ is already loaded!")
else
    print("Loading IJ")
    _G.IJ = {
        Enabled = true,
        JumpHeight = 50
    }


    function Action(Object, Function)
        if Object ~= nil then
            Function(Object)
        end
    end
    
    UIS.InputBegan:connect(function(UserInput)
        if not _G.IJ.Enabled then return end
    
        if UserInput.UserInputType == Enum.UserInputType.Keyboard and UserInput.KeyCode == Enum.KeyCode.Space then
            Action(Player.Character.Humanoid, function(self)
                if self:GetState() == Enum.HumanoidStateType.Jumping or self:GetState() == Enum.HumanoidStateType.Freefall then
                    Action(self.Parent.HumanoidRootPart, function(self)
                        self.Velocity = Vector3.new(0, _G.IJ.JumpHeight, 0)
                    end)
                end
            end)
        end
    end)
    
    Player.Chatted:Connect(function(message)
        if message == "ij enable" then 
            _G.IJ.Enabled = true
        elseif message == "ij disable" then 
            _G.IJ.Enabled = false
        end
    end)
end