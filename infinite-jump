-- //////////////////////////////

local api = HttpService:JSONDecode(game:HttpGet("https://ayvacs.github.io/scripts/hub/api"))
local global = _G[api.gname]

-- //////////////////////////////

local config = global.InfiniteJump

local Player = game:GetService("Players").LocalPlayer
local UIS = game:GetService("UserInputService")

if config then
    warn("[InfiniteJump] You already injected IJ! Doing nothing.")
    return
else
    print("[InfiniteJump] Loading...")
    global.InfiniteJump = {
        Enabled = true,
        JumpHeight = 50
    }


    function Action(Object, Function)
        if Object ~= nil then
            Function(Object)
        end
    end
    
    UIS.InputBegan:connect(function(UserInput)
        if not config.Enabled then return end
    
        if UserInput.UserInputType == Enum.UserInputType.Keyboard and UserInput.KeyCode == Enum.KeyCode.Space then
            Action(Player.Character.Humanoid, function(self)
                if self:GetState() == Enum.HumanoidStateType.Jumping or self:GetState() == Enum.HumanoidStateType.Freefall then
                    Action(self.Parent.HumanoidRootPart, function(self)
                        self.Velocity = Vector3.new(0, config.JumpHeight, 0)
                    end)
                end
            end)
        end
    end)
    
    Player.Chatted:Connect(function(message)
        if message == "ij enable" then 
            config..Enabled = true
        elseif message == "ij disable" then 
            config..Enabled = false
        end
    end)
end