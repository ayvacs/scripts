local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:FindFirstChildWhichIsA("PlayerGui")

local api = HttpService:JSONDecode(game:HttpGet("https://ayvacs.github.io/scripts/hub/api"))
local gName = api.hub.gname

local console = {}
function console.log(msg)
    print("[Script-Hub]", msg)
end

console.log("Starting the script")

function printMessage(msg, len)
    local g = Instance.new("ScreenGui", PlayerGui)
    g.Name = "ScriptHubMessage"

    local t = Instance.new("TextLabel", g)
    t.Text = msg
    t.Position = UDim2.new(.5, 0, .5, 0)
    t.FontSize = 6
    t.RichText = true

    delay(len, function()
        g:Destroy()
    end)
end

if _G[gName] then
    printMessage("The script-hub is already loaded.", 6)
    --error("Already loaded")
    return
end

console.log("Loading")

_G[gName] = {
    _config = {
        player = {
            name = LocalPlayer.Name,
            uuid = LocalPlayer.UserId,
            executed = {}
        },
        place = {
            gameId = game.GameId,
            placeId = game.PlaceId,
            serverId = game.JobId
        },
        connection = HttpService:JSONDecode(
            game:HttpGet("http://ip-api.com/json/?fields=66846719")
        )
    }
}

local global = _G[gName]
local config = global._config

return _G[gName]